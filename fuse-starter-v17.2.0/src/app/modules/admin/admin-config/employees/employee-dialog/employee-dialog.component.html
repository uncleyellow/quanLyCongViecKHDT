<div class="p-6">
    <div class="flex items-center justify-between mb-6">
        <h2 class="text-xl font-semibold">{{ getTitle() }}</h2>
        <button
            mat-icon-button
            (click)="onCancel()"
            class="text-gray-500 hover:text-gray-700">
            <mat-icon [svgIcon]="'heroicons_outline:x-mark'"></mat-icon>
        </button>
    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <mat-form-field class="w-full">
                <mat-label>Họ và tên *</mat-label>
                <input 
                    matInput 
                    formControlName="name" 
                    placeholder="Nhập họ và tên"
                    required>
                <mat-error *ngIf="form.get('name')?.hasError('required')">
                    Họ và tên là bắt buộc
                </mat-error>
                <mat-error *ngIf="form.get('name')?.hasError('minlength')">
                    Họ và tên phải có ít nhất 2 ký tự
                </mat-error>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>Email *</mat-label>
                <input 
                    matInput 
                    formControlName="email" 
                    placeholder="Nhập email"
                    type="email"
                    required>
                <mat-error *ngIf="form.get('email')?.hasError('required')">
                    Email là bắt buộc
                </mat-error>
                <mat-error *ngIf="form.get('email')?.hasError('email')">
                    Email không hợp lệ
                </mat-error>
            </mat-form-field>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <mat-form-field class="w-full">
                <mat-label>Số điện thoại</mat-label>
                <input 
                    matInput 
                    formControlName="phone" 
                    placeholder="Nhập số điện thoại">
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>Chức vụ</mat-label>
                <input 
                    matInput 
                    formControlName="position" 
                    placeholder="Nhập chức vụ">
            </mat-form-field>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <mat-form-field class="w-full">
                <mat-label>Công ty *</mat-label>
                <mat-select formControlName="companyId" required>
                    <mat-option *ngFor="let company of companies" [value]="company.id">
                        {{company.name}}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="form.get('companyId')?.hasError('required')">
                    Vui lòng chọn công ty
                </mat-error>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>Phòng ban *</mat-label>
                <mat-select formControlName="departmentId" required [disabled]="!form.get('companyId')?.value">
                    <mat-option *ngFor="let department of filteredDepartments" [value]="department.id">
                        {{department.name}}
                    </mat-option>
                </mat-select>
                <mat-error *ngIf="form.get('departmentId')?.hasError('required')">
                    Vui lòng chọn phòng ban
                </mat-error>
            </mat-form-field>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <mat-form-field class="w-full">
                <mat-label>Trạng thái</mat-label>
                <mat-select formControlName="status">
                    <mat-option value="active">Đang làm việc</mat-option>
                    <mat-option value="inactive">Nghỉ việc</mat-option>
                    <mat-option value="probation">Thử việc</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>Ngày vào làm</mat-label>
                <input 
                    matInput 
                    [matDatepicker]="hireDatePicker"
                    formControlName="hireDate"
                    placeholder="Chọn ngày vào làm">
                <mat-datepicker-toggle matSuffix [for]="hireDatePicker"></mat-datepicker-toggle>
                <mat-datepicker #hireDatePicker></mat-datepicker>
            </mat-form-field>
        </div>

        <div class="flex justify-end gap-3 pt-4">
            <button
                type="button"
                mat-stroked-button
                (click)="onCancel()">
                Hủy
            </button>
            <button
                type="submit"
                mat-flat-button
                [color]="'primary'"
                [disabled]="!form.valid">
                {{ getSubmitButtonText() }}
            </button>
        </div>
    </form>
</div>
